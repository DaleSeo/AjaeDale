---
import Layout from "../../layouts/Layout.astro";
import {
  getStaticPathsLocales,
  normalizeLang,
  useTranslations,
} from "../../utils/i18n";

export async function getStaticPaths() {
  return getStaticPathsLocales().map((lang) => ({
    params: { lang },
  }));
}

const { lang: langParam } = Astro.params;
const lang = normalizeLang(langParam);

const t = useTranslations(lang);

const title = t("ê°œê·¸ API", "Pun API");
const description = t(
  "ì•„ì¬ë‹¬ë ˆ ê°œê·¸ ë°ì´í„°ë¥¼ ììœ ë¡­ê²Œ ì‚¬ìš©í•˜ì„¸ìš”",
  "Use AjaeDale pun data freely",
);
const baseUrl = "https://www.ajaedale.com";
---

<Layout title={title} description={description} currentPage="api">
  <section class="px-4 py-16">
    <div class="container mx-auto max-w-4xl">
      <!-- í˜ì´ì§€ í—¤ë” -->
      <div class="mb-12 text-center">
        <h1 class="text-foreground mb-4 text-3xl font-bold">ğŸš€ {title}</h1>
        <p class="text-muted-foreground text-lg">
          {description}
        </p>
      </div>

      <!-- API ê°œìš” -->
      <div class="bg-muted/50 mb-8 rounded-lg p-6">
        <h2 class="text-foreground mb-4 text-2xl font-semibold">
          {t("ê°œìš”", "Overview")}
        </h2>
        <p class="text-muted-foreground mb-4">
          {
            t(
              "ì•„ì¬ë‹¬ë ˆëŠ” ë¬´ë£Œ REST APIë¥¼ ì œê³µí•©ë‹ˆë‹¤. ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ëŠ” ì½ê¸° ì „ìš©ì´ë©°, ë¹Œë“œ ì‹œì ì— ì •ì  JSON íŒŒì¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤.",
              "AjaeDale provides a free REST API. All endpoints are read-only and generated as static JSON files at build time.",
            )
          }
        </p>
        <ul class="text-muted-foreground list-inside list-disc space-y-2">
          <li>
            {
              t(
                "âœ… ì™„ì „ ë¬´ë£Œ - ì¸ì¦ ë¶ˆí•„ìš”",
                "âœ… Completely Free - No authentication required",
              )
            }
          </li>
          <li>
            {
              t(
                "âœ… CORS ì§€ì› - ëª¨ë“  ë„ë©”ì¸ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥",
                "âœ… CORS Enabled - Accessible from any domain",
              )
            }
          </li>
          <li>
            {
              t(
                "âœ… ì •ì  íŒŒì¼ - ë¹ ë¥¸ ì‘ë‹µ ì†ë„",
                "âœ… Static Files - Fast response times",
              )
            }
          </li>
          <li>
            {
              t(
                "âœ… ì½ê¸° ì „ìš© - GET ìš”ì²­ë§Œ ì§€ì›",
                "âœ… Read-only - GET requests only",
              )
            }
          </li>
        </ul>
      </div>

      <!-- ê°œê·¸ ì—”ë“œí¬ì¸íŠ¸ -->
      <div class="mb-8">
        <h2 class="text-foreground mb-6 text-2xl font-semibold">
          {t("ê°œê·¸ ì—”ë“œí¬ì¸íŠ¸", "Pun Endpoints")}
        </h2>

        <!-- ëª¨ë“  ê°œê·¸ -->
        <div class="bg-card mb-6 rounded-lg border p-6">
          <div class="mb-4">
            <h3 class="text-foreground mb-2 text-xl font-medium">
              {t("ëª¨ë“  ê°œê·¸ ì¡°íšŒ", "Get All Puns")}
            </h3>
            <code
              class="bg-muted text-primary block rounded px-3 py-2 font-mono text-sm"
            >
              GET {baseUrl}/api/gags.json
            </code>
          </div>
          <p class="text-muted-foreground mb-4">
            {
              t(
                "ê²Œì‹œëœ ëª¨ë“  ê°œê·¸ë¥¼ ìµœì‹ ìˆœìœ¼ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.",
                "Returns all published puns sorted by creation date.",
              )
            }
          </p>
          <details class="mb-4">
            <summary
              class="text-primary cursor-pointer font-medium hover:underline"
            >
              {t("ì˜ˆì‹œ ì‘ë‹µ ë³´ê¸°", "View Example Response")}
            </summary>
            <pre
              class="bg-muted mt-4 overflow-x-auto rounded p-4"><code class="text-sm">{JSON.stringify(
                [
                  {
                    slug: "king-falls-kingkong",
                    lang: "ko",
                    title: "ì™•ì´ ë„˜ì–´ì§€ë©´?",
                    description: "í‚¹ì½©",
                    tags: ["ì™•"],
                    featured: false,
                    createdAt: "2025-09-23T00:17:31.623Z",
                  },
                ],
                null,
                2,
              )}</code></pre>
          </details>
        </div>

        <!-- ê°œë³„ ê°œê·¸ -->
        <div class="bg-card mb-6 rounded-lg border p-6">
          <div class="mb-4">
            <h3 class="text-foreground mb-2 text-xl font-medium">
              {t("íŠ¹ì • ê°œê·¸ ì¡°íšŒ", "Get Single Pun")}
            </h3>
            <code
              class="bg-muted text-primary block rounded px-3 py-2 font-mono text-sm"
            >
              GET {baseUrl}/api/gags/[slug].json
            </code>
          </div>
          <p class="text-muted-foreground mb-4">
            {
              t(
                "slugë¡œ íŠ¹ì • ê°œê·¸ì˜ ìƒì„¸ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.",
                "Get detailed information for a specific pun by slug.",
              )
            }
          </p>
        </div>

        <!-- ì¸ê¸° ê°œê·¸ -->
        <div class="bg-card mb-6 rounded-lg border p-6">
          <div class="mb-4">
            <h3 class="text-foreground mb-2 text-xl font-medium">
              {t("ì¸ê¸° ê°œê·¸ ì¡°íšŒ", "Get Featured Puns")}
            </h3>
            <code
              class="bg-muted text-primary block rounded px-3 py-2 font-mono text-sm"
            >
              GET {baseUrl}/api/gags/featured.json
            </code>
          </div>
          <p class="text-muted-foreground">
            {
              t(
                "featuredë¡œ í‘œì‹œëœ ì¸ê¸° ê°œê·¸ë§Œ ë°˜í™˜í•©ë‹ˆë‹¤.",
                "Returns only puns marked as featured.",
              )
            }
          </p>
        </div>

        <!-- ìµœì‹  ê°œê·¸ -->
        <div class="bg-card mb-6 rounded-lg border p-6">
          <div class="mb-4">
            <h3 class="text-foreground mb-2 text-xl font-medium">
              {t("ìµœì‹  ê°œê·¸ ì¡°íšŒ", "Get Latest Puns")}
            </h3>
            <code
              class="bg-muted text-primary block rounded px-3 py-2 font-mono text-sm"
            >
              GET {baseUrl}/api/gags/latest.json
            </code>
          </div>
          <p class="text-muted-foreground">
            {
              t(
                "ìµœì‹  20ê°œì˜ ê°œê·¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.",
                "Returns the 20 most recent puns.",
              )
            }
          </p>
        </div>
      </div>

      <!-- íƒœê·¸ ì—”ë“œí¬ì¸íŠ¸ -->
      <div class="mb-8">
        <h2 class="text-foreground mb-6 text-2xl font-semibold">
          {t("íƒœê·¸ ì—”ë“œí¬ì¸íŠ¸", "Tag Endpoints")}
        </h2>

        <!-- ëª¨ë“  íƒœê·¸ -->
        <div class="bg-card mb-6 rounded-lg border p-6">
          <div class="mb-4">
            <h3 class="text-foreground mb-2 text-xl font-medium">
              {t("ëª¨ë“  íƒœê·¸ ì¡°íšŒ", "Get All Tags")}
            </h3>
            <code
              class="bg-muted text-primary block rounded px-3 py-2 font-mono text-sm"
            >
              GET {baseUrl}/api/tags.json
            </code>
          </div>
          <p class="text-muted-foreground mb-4">
            {
              t(
                "ëª¨ë“  íƒœê·¸ì™€ ê° íƒœê·¸ì˜ ê°œê·¸ ìˆ˜ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.",
                "Returns all tags with pun counts for each tag.",
              )
            }
          </p>
          <details class="mb-4">
            <summary
              class="text-primary cursor-pointer font-medium hover:underline"
            >
              {t("ì˜ˆì‹œ ì‘ë‹µ ë³´ê¸°", "View Example Response")}
            </summary>
            <pre
              class="bg-muted mt-4 overflow-x-auto rounded p-4"><code class="text-sm">{JSON.stringify(
                [
                  {
                    name: "ì™•",
                    slug: "wang",
                    count: 5,
                  },
                ],
                null,
                2,
              )}</code></pre>
          </details>
        </div>

        <!-- íƒœê·¸ë³„ ê°œê·¸ -->
        <div class="bg-card mb-6 rounded-lg border p-6">
          <div class="mb-4">
            <h3 class="text-foreground mb-2 text-xl font-medium">
              {t("íƒœê·¸ë³„ ê°œê·¸ ì¡°íšŒ", "Get Puns by Tag")}
            </h3>
            <code
              class="bg-muted text-primary block rounded px-3 py-2 font-mono text-sm"
            >
              GET {baseUrl}/api/tags/[slug].json
            </code>
          </div>
          <p class="text-muted-foreground">
            {
              t(
                "íŠ¹ì • íƒœê·¸ê°€ í¬í•¨ëœ ëª¨ë“  ê°œê·¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.",
                "Returns all puns containing a specific tag.",
              )
            }
          </p>
        </div>
      </div>

      <!-- CORS -->
      <div class="bg-muted/50 mb-8 rounded-lg p-6">
        <h2 class="text-foreground mb-4 text-2xl font-semibold">
          {t("CORS", "CORS")}
        </h2>
        <p class="text-muted-foreground">
          {
            t(
              "ëª¨ë“  API ì—”ë“œí¬ì¸íŠ¸ëŠ” CORSê°€ í™œì„±í™”ë˜ì–´ ìˆì–´ ì–´ë–¤ ë„ë©”ì¸ì—ì„œë“  ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
              "All API endpoints have CORS enabled and can be accessed from any domain.",
            )
          }
        </p>
      </div>

      <!-- ì‚¬ìš© ì˜ˆì‹œ -->
      <div class="bg-card rounded-lg border p-6">
        <h2 class="text-foreground mb-4 text-2xl font-semibold">
          {t("ì‚¬ìš© ì˜ˆì‹œ", "Usage Example")}
        </h2>
        <p class="text-muted-foreground mb-4">
          {
            t(
              "JavaScriptì—ì„œ fetch APIë¡œ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:",
              "Easy to use with the fetch API in JavaScript:",
            )
          }
        </p>
        <pre
          class="bg-muted overflow-x-auto rounded p-4"><code class="text-sm">fetch('{baseUrl}/api/gags.json')
  .then(response => response.json())
  .then(data => console.log(data));</code></pre>
      </div>
    </div>
  </section>
</Layout>
